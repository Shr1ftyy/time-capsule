<!DOCTYPE html>
<html>
<body>
<!-- <style> -->
<!-- h3 { -->
<!--   font-family:'Monaco'; -->
<!--   font-size: 40px; -->
<!-- } -->
<!-- h2 { -->
<!--   font-family:'Monaco'; -->
<!--   font-size: 20px; -->
<!-- } -->
<!-- h1 { -->
<!--   font-family:'Monaco'; -->
<!--   font-size: 11px; -->
<!-- } -->
<!-- p { -->
<!--   font-family:'Monaco'; -->
<!--   font-size: 14px; -->
<!-- } -->
<!-- input { -->
<!--   font-family:'Monaco'; -->
<!--   font-size: 14px; -->
<!-- } -->
<!-- p { -->
<!--   font-family:'Monaco'; -->
<!--   font-size: 14px; -->
<!-- } -->

<!-- button { -->
<!--   font-family:'Monaco'; -->
<!--   font-size: 12px; -->
<!-- } -->
<!-- </style> -->
<link rel="stylesheet" href="style.css" />



<center>
  <h3>Time Capsule - POC</h3> 
	<h1>by Shr1ftyy <br><br> Donate ETH or cheapETH to: 0x3f4e8A8012ccc8E26Be83db3B6d97310271EE001</h1>
  <h2>Deploy a time-locked message that's secured by the blockchain and made public on:</h2>
	<input type="date" id="release_date" name="release_date">
	<input type="time" id="release_time"> UTC </input>  
	<br/>
	<br/>

</center>

<script type="text/javascript" src="scripts/publish.js"></script>
<script type="text/javascript" src="scripts/account.js"></script>

<script>
  window.onload = dispPubCap;
</script>

<center>
	<textarea rows="20" cols="60" wrap="physical" type="text" id="msg" value=""></textarea> <br/>
  <p>Enter a phrase for encryption (for IPFS):</p>
  <textarea rows="1" cols="10" wrap="physical" type="text" id="pass" value=""></textarea>
	</textarea>
	<br/>
	<br/>
	<button onclick="publishToIPFS()">Publish message to: </button> <a href="https://ipfs.io/">IPFS</a>
	<br/>
	<br/>
	<button class="enableEthereumButton">Connect Metamask Wallet</button>
  <div id="sendDiv"></div> 
  


	<script>
    console.log("here");
    const ethereumButton = document.querySelector('.enableEthereumButton');
    if (typeof ethereum == 'undefined') {
      console.log("Web3 wallet injector is not installed - Install Metmask for your browser");
      ethereumButton.innerHTML = "Web3 wallet injector is not installed - Install Metmask for your browser";
    } else{
      ethereumButton.addEventListener('click', () => {
        updateInfo();
      }); 
    }
	</script> 

	<script>
    ethereum.on('accountsChanged', updateInfo);
    ethereum.on('chainChanged', updateInfo);
	</script>


  <script>
  </script>

	<!-- <br/> -->
	<!-- <b/> -->
  <!-- <button onclick="publishToCTH()">Publish to cheapETH</button> -->

  <p id="out"></p> <br/> 
  <!-- <p id="info"></p> <br/> -->
  <!-- <p id="for_now">For now, you can only deploy on the Ropsten chain</p> -->

</center>

  <!-- js-ipfs -->
  <script src="https://cdn.jsdelivr.net/npm/ipfs/dist/index.min.js"></script>
  <!-- crypto-jss -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/web3@1.3.4/lib/index.min.js"></script> -->
  <script type="text/javascript" src="https://unpkg.com/web3@1.3.4/dist/web3.min.js"></script>
	<!-- The core Firebase JS SDK is always required and must be listed first -->
<!--	<script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-app.js"></script> --> 
  <!-- <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-database.js"></script> -->
  <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-firestore.js"></script>

  <center>
  <h2>Latest Public Capsules</h2>
  <table class= "center" id="pub_cap">  
    <tr>
    <th>Decrypted Message</th>
    <th>IPFS link</th>
  </tr>
  </table>
  </center>
	<!-- TODO: Add SDKs for Firebase products that you want to use
			 https://firebase.google.com/docs/web/setup#available-libraries -->

	<script>
		// Your web app's Firebase configuration
		var firebaseConfig = {
			apiKey: "AIzaSyAx7MKbhq-kC7hoCiSAMqxbJc2Nv-3jZ6o",
			authDomain: "time-capsule-2516a.firebaseapp.com",
			projectId: "time-capsule-2516a",
			storageBucket: "time-capsule-2516a.appspot.com",
			messagingSenderId: "503896823984",
			appId: "1:503896823984:web:f6fed65cc76ad8ba348375"
		};
		// Initialize Firebase
		firebase.initializeApp(firebaseConfig);
	</script>


	<div style="position: relative; width: 600px; height: 800px;">

    <div style="position: absolute; bottom: 5px;">
    </div>
</div>

</body>
</html>

